<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Baan Thai â€” Menu</title>
    <meta name="description" content="Baan Thai â€” modern responsive menu demo using Tailwind CSS" />
    <script>
      // Tailwind CDN with extended palette for vibrant orange/yellow
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              btorange: {
                DEFAULT: '#ff7a00',
                600: '#ff7a00',
                500: '#ff8b2b'
              },
              btyellow: {
                DEFAULT: '#ffd000',
                400: '#ffe066'
              }
            }
          }
        }
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Minor helper for image placeholders and sidebar */
      .img-placeholder{background:linear-gradient(135deg,#ffd98a 0%, #ffb36b 100%);} 
      #cart-sidebar{width:360px;max-width:100%;}
      .sidebar-hidden{transform:translateX(110%);} 
    </style>
  </head>
  <body class="bg-gray-100 text-black antialiased">
    <!-- Header / Nav -->
    <header class="shadow">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <a href="#" class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-md bg-gradient-to-r from-btorange to-btyellow flex items-center justify-center text-white font-bold">BT</div>
            <span class="text-lg font-semibold">Baan Thai</span>
          </a>
          <nav class="hidden md:flex gap-6 items-center">
            <a href="#menu" class="text-sm font-medium px-3 py-2 rounded-md bg-gradient-to-r from-btorange to-btyellow text-white">Menu</a>
            <a href="#about" class="text-sm font-medium hover:text-btorange">About</a>
            <a href="#contact" class="text-sm font-medium hover:text-btorange">Contact</a>
            <button id="open-cart" class="relative ml-2 px-3 py-2 rounded-md bg-white border border-gray-200 hover:shadow">
              <span class="text-btorange font-semibold">Cart</span>
              <span id="cart-count" class="absolute -top-2 -right-2 bg-btorange text-white text-xs w-6 h-6 rounded-full flex items-center justify-center">0</span>
            </button>
          </nav>
          <div class="md:hidden flex items-center gap-2">
            <button id="open-cart-mobile" class="p-2 rounded-md bg-white border border-gray-200 text-btorange">
              ðŸ›’<span id="cart-count-mobile" class="ml-1 text-sm">0</span>
            </button>
            <button id="mobile-menu-button" aria-label="Open menu" class="p-2 rounded-md bg-btorange text-white">
              â˜°
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile menu -->
      <div id="mobile-menu" class="md:hidden px-4 pb-4 hidden">
        <a href="#menu" class="block py-2 px-3 rounded-md bg-gradient-to-r from-btorange to-btyellow text-white mb-2">Menu</a>
        <a href="#about" class="block py-2 px-3 rounded-md hover:bg-gray-200">About</a>
        <a href="#contact" class="block py-2 px-3 rounded-md hover:bg-gray-200">Contact</a>
      </div>
    </header>

    <!-- Cart Sidebar -->
    <aside id="cart-sidebar" class="fixed right-0 top-0 h-full bg-white shadow-lg p-6 transform transition-transform duration-300 sidebar-hidden z-50">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">Your Cart</h3>
        <button id="close-cart" class="text-gray-500">âœ•</button>
      </div>
      <div class="mt-4 space-y-4" id="cart-items">
        <!-- items inserted here -->
      </div>
      <div class="mt-6 border-t pt-4 space-y-3">
        <div class="flex justify-between text-sm text-gray-600"><span>Subtotal</span><span id="cart-subtotal">$0.00</span></div>
        <div class="flex justify-between text-sm text-gray-600"><span>Tax (8%)</span><span id="cart-tax">$0.00</span></div>
        <div class="flex justify-between text-sm text-gray-600"><span>Discount</span><span id="cart-discount">$0.00</span></div>
        <div class="flex justify-between text-lg font-semibold"><span>Total</span><span id="cart-total">$0.00</span></div>
      </div>
      <div class="mt-4">
        <div class="text-sm text-gray-600">Loyalty Points: <span id="points-balance">0</span></div>
        <div class="mt-2 text-sm text-gray-600">Redeem $5 for 100 points</div>
        <label class="inline-flex items-center mt-2"><input type="checkbox" id="apply-points" class="mr-2">Redeem available rewards</label>
      </div>
      <div class="mt-6">
        <button id="checkout-btn" class="w-full px-4 py-3 rounded-md bg-gradient-to-r from-btorange to-btyellow text-white font-semibold">Checkout</button>
        <button id="demo-purchase" class="w-full mt-2 px-4 py-2 rounded-md border text-gray-700">Complete Demo Purchase</button>
      </div>
    </aside>

    <!-- Hero -->
    <main>
      <section class="bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center py-16">
            <div>
              <p class="inline-block px-3 py-1 rounded-full text-sm font-medium text-btorange bg-orange-50">Authentic â€¢ Fresh â€¢ Fast</p>
              <h1 class="mt-6 text-4xl sm:text-5xl font-extrabold leading-tight">Taste the heart of Thailand</h1>
              <p class="mt-4 text-lg text-gray-700">Classic recipes, hand-picked ingredients, and a modern dining experience. Order online or visit us for fresh-made Thai dishes.</p>
              <div class="mt-8 flex flex-wrap gap-3">
                <a href="#menu" class="inline-flex items-center gap-2 px-5 py-3 rounded-md bg-gradient-to-r from-btorange to-btyellow text-white shadow">View Menu</a>
                <a href="#contact" class="inline-flex items-center gap-2 px-5 py-3 rounded-md border border-gray-200 text-gray-800">Book a Table</a>
              </div>
              <div class="mt-6 text-sm text-gray-500">Open daily â€¢ Pickup & delivery available</div>
            </div>
            <div class="order-first lg:order-last">
              <div class="w-full h-64 sm:h-80 rounded-lg overflow-hidden img-placeholder flex items-end p-6">
                <div class="bg-white bg-opacity-60 rounded-md p-4">
                  <h3 class="text-xl font-semibold">House Special Curry</h3>
                  <p class="text-sm text-gray-800 mt-1">Aromatic coconut curry with fresh herbs.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Menu Grid -->
      <section id="menu" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="flex items-center justify-between">
          <h2 class="text-2xl font-bold">Our Menu</h2>
          <p class="text-sm text-gray-600">Explore our chef's favorites</p>
        </div>
        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Menu item -->
          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Pad Thai</h3>
              <p class="text-sm text-gray-600 mt-1">Stir-fried rice noodles with tamarind sauce, shrimp, and tofu.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$12</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="pad-thai" data-name="Pad Thai" data-price="12">Add</button>
              </div>
            </div>
          </article>

          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Green Curry</h3>
              <p class="text-sm text-gray-600 mt-1">Creamy green curry with eggplant and basil.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$14</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="green-curry" data-name="Green Curry" data-price="14">Add</button>
              </div>
            </div>
          </article>

          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Mango Sticky Rice</h3>
              <p class="text-sm text-gray-600 mt-1">Sweet coconut sticky rice with ripe mango.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$7</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="mango-sticky" data-name="Mango Sticky Rice" data-price="7">Add</button>
              </div>
            </div>
          </article>

          <!-- Repeat items (short demo set) -->
          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Tom Yum Soup</h3>
              <p class="text-sm text-gray-600 mt-1">Spicy and sour soup with shrimp and lemongrass.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$9</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="tom-yum" data-name="Tom Yum Soup" data-price="9">Add</button>
              </div>
            </div>
          </article>

          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Thai Basil Chicken</h3>
              <p class="text-sm text-gray-600 mt-1">Stir-fried chicken with chilies and holy basil.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$13</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="basil-chicken" data-name="Thai Basil Chicken" data-price="13">Add</button>
              </div>
            </div>
          </article>

          <article class="bg-white rounded-lg shadow overflow-hidden">
            <div class="h-40 img-placeholder"></div>
            <div class="p-4">
              <h3 class="font-semibold">Spring Rolls</h3>
              <p class="text-sm text-gray-600 mt-1">Crispy vegetable rolls with sweet chili dip.</p>
              <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">$6</div>
                <button class="add-to-cart px-3 py-1 rounded-md text-white bg-gradient-to-r from-btorange to-btyellow" data-id="spring-rolls" data-name="Spring Rolls" data-price="6">Add</button>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Footer -->
      <footer class="bg-white border-t">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h4 class="font-semibold">Baan Thai</h4>
              <p class="text-sm text-gray-600 mt-2">Street-side flavors, modern touch. Open daily for dine-in and pickup.</p>
              <div class="mt-4 flex gap-3">
                <a href="#" class="text-gray-500 hover:text-btorange">Facebook</a>
                <a href="#" class="text-gray-500 hover:text-btorange">Instagram</a>
              </div>
            </div>

            <div>
              <h4 class="font-semibold">Quick Links</h4>
              <ul class="mt-3 text-sm text-gray-600 space-y-2">
                <li><a href="#menu" class="hover:text-btorange">Menu</a></li>
                <li><a href="#about" class="hover:text-btorange">About</a></li>
                <li><a href="#contact" class="hover:text-btorange">Contact</a></li>
              </ul>
            </div>

            <div>
              <h4 class="font-semibold">Stay Updated</h4>
              <p class="text-sm text-gray-600 mt-2">Sign up for offers and updates.</p>
              <form class="mt-3 flex gap-2" onsubmit="event.preventDefault(); alert('Thanks â€” demo only')">
                <input aria-label="email" type="email" required placeholder="you@example.com" class="flex-1 px-3 py-2 border rounded-md" />
                <button class="px-4 py-2 rounded-md bg-gradient-to-r from-btorange to-btyellow text-white">Subscribe</button>
              </form>
            </div>
          </div>
          <div class="mt-8 text-center text-sm text-gray-500">Â© <span id="year"></span> Baan Thai â€” Demo site</div>
        </div>
      </footer>
    </main>

    <script>
      // Mobile menu toggle
      const btn = document.getElementById('mobile-menu-button')
      const menu = document.getElementById('mobile-menu')
      btn?.addEventListener('click', ()=> {
        menu.classList.toggle('hidden')
      })
      document.getElementById('year').textContent = new Date().getFullYear()
    </script>
+
+    <script>
+      // Cart & Loyalty logic
+      const STORAGE_CART = 'baanthai_cart'
+      const STORAGE_POINTS = 'baanthai_points'
+
+      function loadCart(){
+        try { return JSON.parse(localStorage.getItem(STORAGE_CART)) || {} } catch(e){ return {} }
+      }
+      function saveCart(cart){ localStorage.setItem(STORAGE_CART, JSON.stringify(cart)) }
+
+      function loadPoints(){ return Number(localStorage.getItem(STORAGE_POINTS) || 0) }
+      function savePoints(n){ localStorage.setItem(STORAGE_POINTS, String(n)); renderPoints(); }
+
+      function addToCart(id,name,price){
+        const cart = loadCart()
+        if(!cart[id]) cart[id] = {id,name,price: Number(price),qty:0}
+        cart[id].qty += 1
+        saveCart(cart)
+        renderCart()
+      }
+
+      function removeFromCart(id){ const cart=loadCart(); delete cart[id]; saveCart(cart); renderCart(); }
+      function setQty(id,q){ const cart=loadCart(); if(cart[id]){ cart[id].qty = Math.max(0,Number(q)); if(cart[id].qty===0) delete cart[id]; saveCart(cart); renderCart(); } }
+
+      function cartItemsArray(){ const cart = loadCart(); return Object.values(cart) }
+
+      function calcSubtotal(){ return cartItemsArray().reduce((s,i)=> s + i.price * i.qty, 0) }
+
+      function renderCart(){
+        const itemsEl = document.getElementById('cart-items')
+        itemsEl.innerHTML = ''
+        const items = cartItemsArray()
+        items.forEach(i=>{
+          const div = document.createElement('div')
+          div.className = 'flex items-center gap-3'
+          div.innerHTML = `
+            <div class="w-12 h-12 rounded-md img-placeholder flex items-center justify-center text-white font-semibold">${i.name.split(' ').slice(0,1)}</div>
+            <div class="flex-1">
+              <div class="font-medium">${i.name}</div>
+              <div class="text-sm text-gray-600">$${i.price.toFixed(2)}</div>
+            </div>
+            <div class="flex items-center gap-2">
+              <input type="number" min="0" value="${i.qty}" data-id="${i.id}" class="w-16 px-2 py-1 border rounded text-sm qty-input" />
+              <button data-id="${i.id}" class="text-sm text-red-600 remove-btn">Remove</button>
+            </div>
+          `
+          itemsEl.appendChild(div)
+        })
+
+        const subtotal = calcSubtotal()
+        const tax = subtotal * 0.08
+        let discount = 0
+        const points = loadPoints()
+        const applyPoints = document.getElementById('apply-points')?.checked
+        if(applyPoints){
+          const redeemable = Math.floor(points/100) * 5
+          discount = Math.min(redeemable, subtotal + tax)
+        }
+
+        document.getElementById('cart-subtotal').textContent = `$${subtotal.toFixed(2)}`
+        document.getElementById('cart-tax').textContent = `$${tax.toFixed(2)}`
+        document.getElementById('cart-discount').textContent = `-$${discount.toFixed(2)}`
+        document.getElementById('cart-total').textContent = `$${(subtotal + tax - discount).toFixed(2)}`
+
+        // update header badges
+        const count = items.reduce((s,i)=> s + i.qty, 0)
+        document.getElementById('cart-count').textContent = count
+        document.getElementById('cart-count-mobile').textContent = count
+
+        // attach handlers for qty and remove
+        document.querySelectorAll('.qty-input').forEach(inp=>{
+          inp.addEventListener('change', (e)=> setQty(inp.dataset.id, e.target.value))
+        })
+        document.querySelectorAll('.remove-btn').forEach(b=> b.addEventListener('click', ()=> removeFromCart(b.dataset.id)))
+      }
+
+      function renderPoints(){ document.getElementById('points-balance').textContent = loadPoints() }
+
+      // initialize
+      document.addEventListener('DOMContentLoaded', ()=>{
+        document.querySelectorAll('.add-to-cart').forEach(btn=> btn.addEventListener('click', ()=> addToCart(btn.dataset.id, btn.dataset.name, btn.dataset.price)))
+
+        // cart open/close
+        const sidebar = document.getElementById('cart-sidebar')
+        document.getElementById('open-cart').addEventListener('click', ()=> sidebar.classList.remove('sidebar-hidden'))
+        document.getElementById('open-cart-mobile').addEventListener('click', ()=> sidebar.classList.remove('sidebar-hidden'))
+        document.getElementById('close-cart').addEventListener('click', ()=> sidebar.classList.add('sidebar-hidden'))
+        document.getElementById('apply-points').addEventListener('change', renderCart)
+
+        document.getElementById('checkout-btn').addEventListener('click', async ()=>{
+          const items = cartItemsArray().map(i=>({id:i.id,name:i.name,unit_amount: Math.round(i.price*100),quantity:i.qty}))
+          if(items.length===0){ alert('Your cart is empty'); return }
+          try{
+            const res = await fetch('/create-checkout-session', {method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({items})})
+            if(res.ok){ const data = await res.json(); if(data.url){ window.location = data.url; return } }
+            throw new Error('no redirect')
+          }catch(e){
+            alert('Checkout redirect not available â€” performing demo purchase instead')
+            demoPurchase()
+          }
+        })
+
+        document.getElementById('demo-purchase').addEventListener('click', demoPurchase)
+
+        renderPoints()
+        renderCart()
+      })
+
+      function demoPurchase(){
+        const subtotal = calcSubtotal()
+        if(subtotal<=0){ alert('Cart empty'); return }
+        // award 1 point per dollar spent
+        const pointsEarned = Math.floor(subtotal)
+        const prev = loadPoints()
+        let newPoints = prev + pointsEarned
+
+        // if redeeming, subtract points for discount used
+        const apply = document.getElementById('apply-points')?.checked
+        if(apply){
+          const redeemChunks = Math.floor(newPoints/100)
+          const pointsUsed = redeemChunks * 100
+          const discount = redeemChunks * 5
+          newPoints = newPoints - pointsUsed
+          // apply discount in receipt (we simply acknowledge here)
+          alert(`Applied $${discount} discount via points`)
+        }
+
+        savePoints(newPoints)
+        // clear cart
+        localStorage.removeItem(STORAGE_CART)
+        renderCart()
+        alert(`Demo purchase complete â€” you earned ${pointsEarned} points`)
+      }
+    </script>
   </body>
 </html>
